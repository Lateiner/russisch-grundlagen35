<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Logik-Gitter: Kasus-Analyse (10 Sätze)</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;     /* Blau */
            --success: #27ae60;    /* Grün */
            --error: #c0392b;      /* Rot */
            --bg: #f4f7f6;
            --surface: #ffffff;
            --border: #dcdcdc;
            --header-bg: #ecf0f1;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--primary);
            margin: 0;
            padding: 15px;
            line-height: 1.5;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding-bottom: 80px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            background: var(--surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        h1 { margin: 0 0 10px 0; color: var(--accent); font-size: 1.5rem; }
        p { margin: 0; color: #7f8c8d; }

        .intro-box {
            background-color: #eaf2f8;
            border-left: 5px solid var(--accent);
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 4px;
            font-size: 0.95rem;
        }

        /* --- THE MATRIX GRID --- */
        .matrix-container {
            background: var(--surface);
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow: hidden; 
            border: 1px solid var(--border);
        }

        /* Desktop Headers */
        .grid-header {
            display: grid;
            grid-template-columns: 2fr repeat(6, 1fr);
            background-color: var(--header-bg);
            border-bottom: 2px solid var(--border);
            font-weight: bold;
            color: #555;
        }

        .header-cell {
            padding: 15px 5px;
            text-align: center;
            font-size: 0.9rem;
        }
        .header-cell.text-col { text-align: left; padding-left: 20px; }

        /* Rows */
        .grid-row {
            display: grid;
            grid-template-columns: 2fr repeat(6, 1fr);
            border-bottom: 1px solid var(--border);
            align-items: center;
            transition: background 0.2s;
        }

        .grid-row:last-child { border-bottom: none; }
        .grid-row:hover { background-color: #f9f9f9; }

        /* Text Cell */
        .text-cell {
            padding: 15px 20px;
            font-size: 1rem;
            border-right: 1px solid #eee;
        }

        .ru-text { font-weight: bold; display: block; margin-bottom: 4px; color: #2c3e50; }
        .de-hint { font-size: 0.85rem; color: #7f8c8d; font-style: italic; }

        /* Checkbox/Button Cells */
        .check-cell {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            border-right: 1px solid #f5f5f5;
        }
        .check-cell:last-child { border-right: none; }

        /* The Button */
        .case-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid #ccc;
            background: white;
            cursor: pointer;
            font-weight: bold;
            color: #999;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .case-btn:hover { border-color: var(--accent); color: var(--accent); background: #f0f8ff; }

        /* Selected State */
        .case-btn.selected {
            background-color: var(--accent);
            border-color: var(--accent);
            color: white;
            transform: scale(1.15);
            box-shadow: 0 2px 5px rgba(52, 152, 219, 0.4);
        }

        /* Validation States */
        .case-btn.correct {
            background-color: var(--success) !important;
            border-color: var(--success) !important;
            color: white !important;
        }

        .case-btn.wrong {
            background-color: var(--error) !important;
            border-color: var(--error) !important;
            color: white !important;
            opacity: 0.5;
        }
        
        .btn-label { display: none; } /* Hidden on desktop */
        .btn-icon { display: block; } /* Visible on desktop */


        /* --- RESPONSIVE DESIGN (Mobile View) --- */
        @media (max-width: 768px) {
            .grid-header { display: none; } 

            .grid-row {
                display: block; 
                padding: 15px;
                border-bottom: 4px solid #f0f0f0;
            }

            .text-cell {
                border-right: none;
                padding: 0 0 15px 0;
                text-align: center;
            }

            .mobile-btn-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr); 
                gap: 8px;
            }

            .check-cell { border: none; padding: 0; }

            .case-btn {
                width: 100%; 
                height: 40px;
                border-radius: 6px; 
                flex-direction: row;
                gap: 5px;
            }

            .btn-label { display: inline; text-transform: uppercase; font-size: 0.75rem; }
            .btn-icon { display: none; } /* Hide number on mobile to save space */
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            position: sticky;
            bottom: 0;
            background: rgba(244, 247, 246, 0.95);
            padding: 15px 0;
            border-top: 1px solid #ddd;
            z-index: 100;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            color: white;
            font-size: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }
        .btn:active { transform: scale(0.98); }

        .btn-check { background-color: var(--success); }
        .btn-reset { background-color: #7f8c8d; }
        .btn-solve { background-color: #f39c12; }

        .feedback-general {
            text-align: center;
            font-weight: bold;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Logik-Gitter: Kasus-Analyse</h1>
        <p>Bestimmen Sie den Fall für КОТОРЫЕ.</p>
    </header>

    <div class="intro-box">
        <strong>Anleitung:</strong>
        <br>Schauen Sie sich das Satzfragment an. Welchen Fall verlangt die Grammatik in der Lücke?
        <br>Klicken Sie die entsprechende Spalte an (Nom, Gen, Dat, Akk, Instr, Präp).
    </div>

    <div class="matrix-container">
        <!-- Desktop Header -->
        <div class="grid-header">
            <div class="header-cell text-col">Satzfragment</div>
            <div class="header-cell" title="Nominativ">Nom<br><small>(1)</small></div>
            <div class="header-cell" title="Genitiv">Gen<br><small>(2)</small></div>
            <div class="header-cell" title="Dativ">Dat<br><small>(3)</small></div>
            <div class="header-cell" title="Akkusativ">Akk<br><small>(4)</small></div>
            <div class="header-cell" title="Instrumental">Instr<br><small>(5)</small></div>
            <div class="header-cell" title="Präpositiv">Präp<br><small>(6)</small></div>
        </div>

        <!-- 1. Genitiv (Besitz/Haben) -->
        <div class="grid-row" data-correct="gen">
            <div class="text-cell">
                <span class="ru-text">... у ... есть машина.</span>
                <span class="de-hint">(... die ein Auto haben.)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

        <!-- 2. Akkusativ (Belebt) -->
        <div class="grid-row" data-correct="akk">
            <div class="text-cell">
                <span class="ru-text">... я часто вижу.</span>
                <span class="de-hint">(... die ich oft sehe [Personen].)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

        <!-- 3. Instrumental (Mit wem?) -->
        <div class="grid-row" data-correct="instr">
            <div class="text-cell">
                <span class="ru-text">... с ... мы гуляем.</span>
                <span class="de-hint">(... mit denen wir spazieren.)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

        <!-- 4. Nominativ (Subjekt) -->
        <div class="grid-row" data-correct="nom">
            <div class="text-cell">
                <span class="ru-text">... стоят на улице.</span>
                <span class="de-hint">(... die auf der Straße stehen.)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

        <!-- 5. Dativ (Verb schenken/geben) -->
        <div class="grid-row" data-correct="dat">
            <div class="text-cell">
                <span class="ru-text">... я дарю цветы.</span>
                <span class="de-hint">(... denen ich Blumen schenke.)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

        <!-- 6. Präpositiv (In wo?) -->
        <div class="grid-row" data-correct="prep">
            <div class="text-cell">
                <span class="ru-text">... в ... мы живём.</span>
                <span class="de-hint">(... in denen wir wohnen.)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

        <!-- 7. Akkusativ (Unbelebt) -->
        <div class="grid-row" data-correct="akk">
            <div class="text-cell">
                <span class="ru-text">... мы купили вчера.</span>
                <span class="de-hint">(... die wir gestern kauften [Sachen].)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

        <!-- 8. Dativ (Zielrichtung Zu) -->
        <div class="grid-row" data-correct="dat">
            <div class="text-cell">
                <span class="ru-text">... к ... мы поехали.</span>
                <span class="de-hint">(... zu denen wir gefahren sind.)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

        <!-- 9. Genitiv (Negation) -->
        <div class="grid-row" data-correct="gen">
            <div class="text-cell">
                <span class="ru-text">... здесь больше нет.</span>
                <span class="de-hint">(... die nicht mehr hier sind.)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

        <!-- 10. Präpositiv (Über wen?) -->
        <div class="grid-row" data-correct="prep">
            <div class="text-cell">
                <span class="ru-text">... о ... мы говорили.</span>
                <span class="de-hint">(... über die wir sprachen.)</span>
            </div>
            <div class="mobile-btn-grid" style="display:contents;">
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'nom')"><span class="btn-icon">1</span><span class="btn-label">Nom</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'gen')"><span class="btn-icon">2</span><span class="btn-label">Gen</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'dat')"><span class="btn-icon">3</span><span class="btn-label">Dat</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'akk')"><span class="btn-icon">4</span><span class="btn-label">Akk</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'instr')"><span class="btn-icon">5</span><span class="btn-label">Instr</span></button></div>
                <div class="check-cell"><button class="case-btn" onclick="select(this, 'prep')"><span class="btn-icon">6</span><span class="btn-label">Präp</span></button></div>
            </div>
        </div>

    </div>

    <div class="feedback-general" id="mainFeedback"></div>

    <div class="controls">
        <button class="btn btn-check" onclick="checkAll()">Überprüfen</button>
        <button class="btn btn-reset" onclick="resetAll()">Zurücksetzen</button>
        <button class="btn btn-solve" onclick="solveAll()">Lösung</button>
    </div>
</div>

<script>
    function select(btn, value) {
        const row = btn.closest('.grid-row');
        
        // Alte Auswahl entfernen
        row.querySelectorAll('.case-btn').forEach(b => {
            b.classList.remove('selected', 'correct', 'wrong');
        });

        // Neue Auswahl setzen
        btn.classList.add('selected');
        row.setAttribute('data-user-choice', value);

        // Feedback verstecken wenn man etwas ändert
        document.getElementById('mainFeedback').style.display = 'none';
    }

    function checkAll() {
        const rows = document.querySelectorAll('.grid-row');
        let allCorrect = true;
        let answeredCount = 0;

        rows.forEach(row => {
            const correctVal = row.getAttribute('data-correct');
            const userVal = row.getAttribute('data-user-choice');
            const selectedBtn = row.querySelector('.case-btn.selected');

            if (userVal) {
                answeredCount++;
                if (userVal === correctVal) {
                    selectedBtn.classList.add('correct');
                } else {
                    selectedBtn.classList.add('wrong');
                    allCorrect = false;
                }
            } else {
                allCorrect = false; 
            }
        });

        const fb = document.getElementById('mainFeedback');
        fb.style.display = 'block';
        
        if (answeredCount === 0) {
            fb.textContent = "Bitte wählen Sie für jede Zeile einen Fall aus.";
            fb.style.color = "#7f8c8d";
        } else if (answeredCount < rows.length) {
            fb.textContent = "Bitte füllen Sie alle Zeilen aus.";
            fb.style.color = "#e67e22";
        } else if (allCorrect) {
            fb.textContent = "Hervorragend! Alle Fälle korrekt bestimmt.";
            fb.style.color = "#27ae60";
        } else {
            fb.textContent = "Einige Antworten sind falsch (rot). Versuchen Sie es noch einmal.";
            fb.style.color = "#e74c3c";
        }
    }

    function resetAll() {
        const rows = document.querySelectorAll('.grid-row');
        rows.forEach(row => {
            row.removeAttribute('data-user-choice');
            row.querySelectorAll('.case-btn').forEach(btn => {
                btn.classList.remove('selected', 'correct', 'wrong');
            });
        });
        document.getElementById('mainFeedback').style.display = 'none';
    }

    function solveAll() {
        resetAll();
        const rows = document.querySelectorAll('.grid-row');
        // Reihenfolge der Buttons: Nom, Gen, Dat, Akk, Instr, Prep
        const map = ['nom', 'gen', 'dat', 'akk', 'instr', 'prep'];

        rows.forEach(row => {
            const correctVal = row.getAttribute('data-correct');
            const index = map.indexOf(correctVal);
            
            if (index >= 0) {
                const buttons = row.querySelectorAll('.case-btn');
                if (buttons[index]) {
                    buttons[index].classList.add('correct');
                }
            }
        });
        
        const fb = document.getElementById('mainFeedback');
        fb.style.display = 'block';
        fb.textContent = "Lösung angezeigt.";
        fb.style.color = "#27ae60";
    }
</script>

</body>
</html>